
  <ion-toolbar>
    <ion-title>
      Estad√≠sticas
    </ion-title>
  </ion-toolbar>


<ion-content [fullscreen]="true">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
    </ion-refresher>
    
        <ion-grid>
          <ion-row>
            <ion-col>
              <div class="btn_venta_mes">
                <p (click)="setOpenTop(true)">Top de productos</p>
              </div>
            </ion-col>
            <ion-col>
              <div class="btn_venta_mes">
                <p (click)="setOpen(true)">Ventas por mes</p>
              </div>
            </ion-col>
        </ion-row>
          </ion-grid>
          <div class="mes_actual">
            <p>Mes actual: {{ mesActual }}</p>
          </div>
        <ion-card>
          <canvas  id="myChart" width="400" height="400">
          </canvas>
        </ion-card>

  
        <ion-grid>
          <ion-row>
            <ion-col *ngFor="let ingreso of ingresosDiarios; let i = index">
              <app-day-box [day]="ingreso.day" [value]="ingreso.value" [backgroundColor]="getBackgroundColor(i)"></app-day-box>
            </ion-col>
          </ion-row>
        </ion-grid>
    
      <ion-modal [isOpen]="isModalOpen">
        <ng-template>
          <ion-toolbar>
            <ion-title>Ventas de mes total</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="setOpen(false)"><ion-icon id="btn_cerrar" name="close-outline"></ion-icon></ion-button>
            </ion-buttons>
          </ion-toolbar>
          <ion-content class="ion-padding">
            <ion-content>
              <ion-col style="border: 1px solid #e7ebee;" size="6" size-md="4">
                <ion-card>
                  <ion-card-title>Seleccionar Mes</ion-card-title>
                  <select [(ngModel)]="mesSeleccionado" style="margin-left: 10px;">
                    <option *ngFor="let mes of mesesConVentas" [value]="mes">{{ mes }}</option>
                  </select>
                  
                </ion-card>
              </ion-col>
              
              <ion-col style="border: 1px solid #e7ebee;" size="6" size-md="4" *ngIf="mesSeleccionado">
                <ion-card>
                  <ion-card-header>
                    <ion-card-title>{{ mesSeleccionado }}</ion-card-title>
                  </ion-card-header>
                  <ion-card-content>
                    Total: {{ obtenerTotalPorMes(mesSeleccionado) }}
                  </ion-card-content>
                </ion-card>
              </ion-col>
              
            </ion-content>
          </ion-content>
        </ng-template>
      </ion-modal>

      <ion-modal [isOpen]="isModalOpenTop">
        <ng-template>
          <ion-toolbar>
            <ion-title>Top de producto de {{ mesActual }}</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="setOpenTop(false)"><ion-icon id="btn_cerrar" name="close-outline"></ion-icon></ion-button>
            </ion-buttons>
          </ion-toolbar>
          <ion-content class="ion-padding">
            <ion-list>
              <ion-item *ngFor="let producto of topProductos">
                {{ producto.producto_factura.length > 15 ? producto.producto_factura.slice(0, 15) + '...' : producto.producto_factura  }} - Cantidad vendida: {{ producto.cantidad_productos_factura }}
              </ion-item>
            </ion-list>
            
          </ion-content>
        </ng-template>
      </ion-modal>
</ion-content>
